<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Natural Gallery TYPO3 v10 Test</title>
    <link rel="stylesheet" href="../Resources/Public/StyleSheets/natural-gallery.full.css">
    <link rel="stylesheet" href="../Resources/Public/StyleSheets/natural.css">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .gallery { border: 1px solid #ddd; min-height: 400px; }
        h1 { color: #333; }
        .test-info { background: #f5f5f5; padding: 10px; margin-bottom: 20px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Natural Gallery TYPO3 v10.0.1 Test - New API</h1>
    
    <div class="test-info">
        <p><strong>Test Status:</strong> <span id="test-status">Loading...</span></p>
        <p><strong>Gallery Type:</strong> <span id="gallery-type">Natural Layout</span></p>
        <p><strong>Console:</strong> Check browser console for initialization logs</p>
        <p><strong>Note:</strong> This test uses the new v10 API (breaking changes)</p>
    </div>

    <!-- Gallery container -->
    <div id="gallery-test" class="gallery"></div>

    <!-- Load Natural Gallery v10 -->
    <script src="../Resources/Public/JavaScript/natural-gallery.full.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const galleryElement = document.getElementById('gallery-test');
            
            // Gallery options using new v10 API
            const options = {
                gap: 3,
                rowHeight: 350,
                showLabels: 'hover',
                lightbox: true
            };
            
            // Test images in new v10 format
            const images = [
                {
                    id: 1,
                    thumbnailSrc: 'https://picsum.photos/400/300?random=1',
                    enlargedSrc: 'https://picsum.photos/1200/900?random=1',
                    enlargedWidth: 1200,
                    enlargedHeight: 900,
                    title: 'Test Image 1'
                },
                {
                    id: 2,
                    thumbnailSrc: 'https://picsum.photos/400/250?random=2',
                    enlargedSrc: 'https://picsum.photos/1200/750?random=2',
                    enlargedWidth: 1200,
                    enlargedHeight: 750,
                    title: 'Test Image 2'
                },
                {
                    id: 3,
                    thumbnailSrc: 'https://picsum.photos/400/350?random=3',
                    enlargedSrc: 'https://picsum.photos/1200/1050?random=3',
                    enlargedWidth: 1200,
                    enlargedHeight: 1050,
                    title: 'Test Image 3'
                },
                {
                    id: 4,
                    thumbnailSrc: 'https://picsum.photos/400/400?random=4',
                    enlargedSrc: 'https://picsum.photos/1200/1200?random=4',
                    enlargedWidth: 1200,
                    enlargedHeight: 1200,
                    title: 'Test Image 4'
                }
            ];
            
            try {
                // Create gallery using new v10 API (now available globally)
                if (typeof window.Natural !== 'undefined') {
                    const gallery = new window.Natural(galleryElement, options);
                    gallery.addItems(images);
                    
                    // Update test status
                    document.getElementById('test-status').textContent = '✅ Success - Gallery initialized with new v10 API';
                    document.getElementById('test-status').style.color = 'green';
                    
                    console.log('✅ Gallery created successfully with v10 API:', gallery);
                } else {
                    throw new Error('Natural Gallery v10 not found');
                }
                
            } catch (error) {
                console.error('❌ Failed to initialize gallery:', error);
                document.getElementById('test-status').textContent = '❌ Failed - ' + error.message;
                document.getElementById('test-status').style.color = 'red';
            }
        });
    </script>
</body>
</html>